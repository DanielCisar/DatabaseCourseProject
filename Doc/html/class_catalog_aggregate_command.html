<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Database course project: CatalogAggregateCommand Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Database course project
   </div>
   <div id="projectbrief">Simple database console</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_catalog_aggregate_command.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_catalog_aggregate_command-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">CatalogAggregateCommand Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Performs aggregate calculations (sum, product, minimum, maximum) on numeric column values in a table.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_catalog_aggregate_command_8hpp_source.html">CatalogAggregateCommand.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CatalogAggregateCommand:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_catalog_aggregate_command.png" usemap="#CatalogAggregateCommand_map" alt=""/>
  <map id="CatalogAggregateCommand_map" name="CatalogAggregateCommand_map">
<area href="class_command.html" title="Abstract base class for all command operations." alt="Command" shape="rect" coords="0,0,169,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae5995d71ef3eb02d6e4e669cc87986d0" id="r_ae5995d71ef3eb02d6e4e669cc87986d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5995d71ef3eb02d6e4e669cc87986d0">CatalogAggregateCommand</a> (<a class="el" href="struct_command_context.html">CommandContext</a> &amp;context)</td></tr>
<tr class="memdesc:ae5995d71ef3eb02d6e4e669cc87986d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="class_catalog_aggregate_command.html" title="Performs aggregate calculations (sum, product, minimum, maximum) on numeric column values in a table.">CatalogAggregateCommand</a> instance.  <br /></td></tr>
<tr class="separator:ae5995d71ef3eb02d6e4e669cc87986d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac159554142c605c4f777766f6437b8d6" id="r_ac159554142c605c4f777766f6437b8d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac159554142c605c4f777766f6437b8d6">execute</a> (const std::vector&lt; std::string &gt; &amp;params) override</td></tr>
<tr class="memdesc:ac159554142c605c4f777766f6437b8d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the aggregate command, performing calculations on matching rows.  <br /></td></tr>
<tr class="separator:ac159554142c605c4f777766f6437b8d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f16f1337bbebd486471133bcc962bd" id="r_a58f16f1337bbebd486471133bcc962bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_command.html">Command</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58f16f1337bbebd486471133bcc962bd">clone</a> (<a class="el" href="struct_command_context.html">CommandContext</a> &amp;newContext) const override</td></tr>
<tr class="memdesc:a58f16f1337bbebd486471133bcc962bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a deep copy of the current object.  <br /></td></tr>
<tr class="separator:a58f16f1337bbebd486471133bcc962bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_command"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_class_command')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_command.html">Command</a></td></tr>
<tr class="memitem:aa545a53d35818f9efb936daf3fa16c61 inherit pub_methods_class_command" id="r_aa545a53d35818f9efb936daf3fa16c61"><td class="memItemLeft" align="right" valign="top">
virtual&#160;</td><td class="memItemRight" valign="bottom"><b>~Command</b> ()=default</td></tr>
<tr class="memdesc:aa545a53d35818f9efb936daf3fa16c61 inherit pub_methods_class_command"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor for safe cleanup. <br /></td></tr>
<tr class="separator:aa545a53d35818f9efb936daf3fa16c61 inherit pub_methods_class_command"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Performs aggregate calculations (sum, product, minimum, maximum) on numeric column values in a table. </p>
<p>This command allows users to perform aggregate operations on a specified target column within a table. The aggregation is conditionally applied only to rows that meet a defined search criterion on a different (or the same) column. The result of the aggregation is then printed to the console. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae5995d71ef3eb02d6e4e669cc87986d0" name="ae5995d71ef3eb02d6e4e669cc87986d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5995d71ef3eb02d6e4e669cc87986d0">&#9670;&#160;</a></span>CatalogAggregateCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CatalogAggregateCommand::CatalogAggregateCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_command_context.html">CommandContext</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>context</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="class_catalog_aggregate_command.html" title="Performs aggregate calculations (sum, product, minimum, maximum) on numeric column values in a table.">CatalogAggregateCommand</a> instance. </p>
<p>Constructs a <a class="el" href="class_catalog_aggregate_command.html" title="Performs aggregate calculations (sum, product, minimum, maximum) on numeric column values in a table.">CatalogAggregateCommand</a> object, initializing it with the shared command context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>A reference to the <code><a class="el" href="struct_command_context.html" title="Shared execution context passed to all command classes.">CommandContext</a></code> object, which encapsulates the application's shared database catalog and I/O utility handlers.</td></tr>
    <tr><td class="paramname">context</td><td>A reference to the <code><a class="el" href="struct_command_context.html" title="Shared execution context passed to all command classes.">CommandContext</a></code> object. This context provides access to the application's shared database catalog and console output utilities, which are necessary for performing aggregation operations and reporting results. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a58f16f1337bbebd486471133bcc962bd" name="a58f16f1337bbebd486471133bcc962bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58f16f1337bbebd486471133bcc962bd">&#9670;&#160;</a></span>clone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_command.html">Command</a> * CatalogAggregateCommand::clone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_command_context.html">CommandContext</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>newContext</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a deep copy of the current object. </p>
<p>Creates a deep copy of the current <code><a class="el" href="class_catalog_aggregate_command.html" title="Performs aggregate calculations (sum, product, minimum, maximum) on numeric column values in a table.">CatalogAggregateCommand</a></code> object.</p>
<p>This override implements the polymorphic cloning behavior defined in <code><a class="el" href="class_command.html" title="Abstract base class for all command operations.">Command</a></code>. It constructs a new instance, associating it with the provided <code>newContext</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newContext</td><td>A reference to the <code><a class="el" href="struct_command_context.html" title="Shared execution context passed to all command classes.">CommandContext</a></code> that the new cloned command should use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to a newly allocated object, which is a deep copy of this instance.</dd></dl>
<p>This override constructs a new <code><a class="el" href="class_catalog_aggregate_command.html" title="Performs aggregate calculations (sum, product, minimum, maximum) on numeric column values in a table.">CatalogAggregateCommand</a></code> instance, associating it with the provided <code>newContext</code>. Since <code><a class="el" href="class_catalog_aggregate_command.html" title="Performs aggregate calculations (sum, product, minimum, maximum) on numeric column values in a table.">CatalogAggregateCommand</a></code> itself only holds a reference to <code><a class="el" href="struct_command_context.html" title="Shared execution context passed to all command classes.">CommandContext</a></code> and no other dynamically allocated members, a simple construction with the new context is sufficient for cloning this command object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newContext</td><td>A reference to the <code><a class="el" href="struct_command_context.html" title="Shared execution context passed to all command classes.">CommandContext</a></code> that the new cloned command should use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to a newly allocated <code><a class="el" href="class_catalog_aggregate_command.html" title="Performs aggregate calculations (sum, product, minimum, maximum) on numeric column values in a table.">CatalogAggregateCommand</a></code> object. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The caller is responsible for deleteing the returned pointer. </dd></dl>

<p>Implements <a class="el" href="class_command.html#ad72ab674403f89ab62d9f31218c78551">Command</a>.</p>

</div>
</div>
<a id="ac159554142c605c4f777766f6437b8d6" name="ac159554142c605c4f777766f6437b8d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac159554142c605c4f777766f6437b8d6">&#9670;&#160;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CatalogAggregateCommand::execute </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>params</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes the aggregate command, performing calculations on matching rows. </p>
<p>Executes the aggregate command, performing a calculation on filtered numeric data.</p>
<p>This method takes a table name, a search column index, a search value, a target column index (for aggregation), and the desired operation. It filters rows based on the search condition and then applies the aggregate operation (sum, product, minimum, or maximum) to the values in the specified target column of those matching rows. The final result is printed to the console.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>A constant reference to a vector of strings representing command-line parameters. Expected format:<ul>
<li><code>params[0]</code>: "aggregate" (command name)</li>
<li><code>params[1]</code>: Name of the table to perform aggregation on.</li>
<li><code>params[2]</code>: Index of the column to use for the search condition (0-indexed).</li>
<li><code>params[3]</code>: Value to match in the search column.</li>
<li><code>params[4]</code>: Index of the column on which the aggregation will be performed (0-indexed).</li>
<li><code>params[5]</code>: The aggregation operation to perform ("sum", "product", "minimum", or "maximum").</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>If no catalog is currently loaded. </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If the number of parameters is incorrect (not 6). </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If the specified table does not exist. </td></tr>
    <tr><td class="paramname">std::out_of_range</td><td>If the search column index or target column index is invalid (out of bounds). </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If the target column is not of a numeric type (Integer or Double). </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If a non-numeric value is found in the target column during aggregation. </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If no rows match the search criterion. </td></tr>
    <tr><td class="paramname">std::invalid_argument</td><td>If an unknown aggregation operation is specified. </td></tr>
    <tr><td class="paramname">std::exception</td><td>Any other exceptions propagated from underlying operations (e.g., <code>std::stoi</code>).</td></tr>
  </table>
  </dd>
</dl>
<p>This function parses the command-line arguments to extract the table name, search column index, search value, target column index, and the desired aggregation operation. It then performs the following steps:</p><ol type="1">
<li>Validates that a catalog is loaded and that the correct number of parameters (6) is provided.</li>
<li>Retrieves the target <code><a class="el" href="class_table.html" title="Represents a single table within the database catalog, holding a collection of columns.">Table</a></code> from the <code>context.loadedCatalog</code>.</li>
<li>Validates that both search and target column indices are within valid bounds.</li>
<li>Ensures the target column is of a numeric type (Integer or Double) suitable for aggregation.</li>
<li>Iterates through the table's rows: if a row matches the <code>searchValue</code> in the <code>searchColumn</code>, it attempts to convert the value from the <code>targetColumn</code> to a <code>double</code> and adds it to a temporary collection of cells. Non-numeric values in the target column will cause an error.</li>
<li>If no rows match the search condition, an error is thrown.</li>
<li>Performs the specified aggregation operation ("sum", "product", "minimum", "maximum") using the collected numeric values.</li>
<li>Prints the final calculated aggregate result to the console. Errors during any of these steps are caught and reported to the console.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>A constant reference to a vector of strings containing command-line arguments. Expected elements:<ul>
<li><code>params[0]</code>: "aggregate"</li>
<li><code>params[1]</code>: <a class="el" href="class_table.html" title="Represents a single table within the database catalog, holding a collection of columns.">Table</a> name.</li>
<li><code>params[2]</code>: Search column index (as a string, converted to int).</li>
<li><code>params[3]</code>: Search value (string).</li>
<li><code>params[4]</code>: Target column index (as a string, converted to int).</li>
<li><code>params[5]</code>: Operation name ("sum", "product", "minimum", "maximum").</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>If <code>context.loadedCatalogExists</code> is <code>false</code>. </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If <code>params.size()</code> is not 6. </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If <code>context.loadedCatalog.returnTableByName()</code> fails (table not found). </td></tr>
    <tr><td class="paramname">std::out_of_range</td><td>If <code>params[2]</code> or <code>params[4]</code> cannot be converted to an integer, or if the resulting <code>searchColumn</code> or <code>targetColumn</code> index is out of bounds for the table. </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If the <code>targetColumn</code> is not <code>ColumnType::INTEGER</code> or <code>ColumnType::DOUBLE</code>. </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If <code>std::stod</code> fails to convert a value from the <code>targetColumn</code> to a double, indicating non-numeric data where numeric was expected. </td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If no rows are found that match the <code>seacrhValue</code> in the <code>searchColumn</code>. </td></tr>
    <tr><td class="paramname">std::invalid_argument</td><td>If <code>params[5]</code> (operation name) is not one of the recognized operations. </td></tr>
    <tr><td class="paramname">std::exception</td><td>Catches any other unexpected exceptions and reports their messages. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="class_command.html#ab0a152e96747ac9b24c624514fcc58a7">Command</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>DatabaseCourseProject/<a class="el" href="_catalog_aggregate_command_8hpp_source.html">CatalogAggregateCommand.hpp</a></li>
<li>DatabaseCourseProject/<b>CatalogAggregateCommandImpl.cpp</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_catalog_aggregate_command.html">CatalogAggregateCommand</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
